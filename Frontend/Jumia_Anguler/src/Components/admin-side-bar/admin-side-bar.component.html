<div [class.collapsed]="isCollapsed" id="sidebar"
     class="sidebar d-flex flex-column flex-shrink-0 bg-light text-dark"
     style="height: 100vh; transition: width 0.3s;">
  
    <div class="toggle-wrapper d-flex justify-content-end">
      <button class="sidebar-toggle-inner" (click)="toggleSidebar()">
        <i class="bi" [ngClass]="isCollapsed ? 'bi-chevron-right' : 'bi-chevron-left'"></i>
      </button>
    </div>
    
    <!-- Sidebar Header -->
    <a class="d-flex align-items-center mb-3 text-dark text-decoration-none px-3">
      <img src="assets/mtager-store-logo.jpg" style="width: 40px; height: 40px;">
      <ng-container *ngIf="!isCollapsed">
        <span class="ms-2 sidebar-text">Admin Dashboard</span>
      </ng-container>
    </a>

    <hr class="my-2" />

    <!-- Sidebar Menu -->
    <ul class="nav nav-pills nav-flush flex-column text-start">

      <!-- Home -->
      <li class="nav-item">
        <a class="nav-link py-3 border-bottom text-dark d-flex align-items-center"
           [class.active]="isActive('dashboard')"
           routerLink="/admin/dashboard">
          <i class="bi bi-house-door-fill fs-5"></i>
          <span class="ms-2 sidebar-text" *ngIf="!isCollapsed">Home</span>
        </a>
      </li>

      <!-- Manage Users -->
      <li class="nav-item">
        <a class="nav-link py-3 border-bottom text-dark d-flex justify-content-between"
           [class.active]="isSubmenuActive('users')"
           (click)="toggleUsersMenu()">
          <div class="d-flex align-items-center">
            <i class="bi bi-people-fill fs-5"></i>
            <span class="ms-2 sidebar-text" *ngIf="!isCollapsed">Manage Users</span>
          </div>
          <i *ngIf="!isCollapsed"
             class="bi"
             [ngClass]="{'bi-chevron-down': !isUsersMenuOpen, 'bi-chevron-up': isUsersMenuOpen}"></i>
        </a>
        <div class="collapse ps-4" [class.show]="!isCollapsed && isUsersMenuOpen">
          <a class="submenu-item text-dark py-2" routerLink="/admin/adduser" [class.active]="isActive('add-user')">
            <i class="bi bi-plus-circle me-2"></i>
            <span>Add User</span>
          </a>
          <a class="submenu-item text-dark py-2" routerLink="/admin/users" [class.active]="isActive('view-users')">
            <i class="bi bi-list-ul me-2"></i>
            <span>View Users</span>
          </a>
        </div>
      </li>

      <!-- View Products -->
      <li class="nav-item">
        <a class="nav-link py-3 border-bottom text-dark d-flex align-items-center"
           [class.active]="isActive('view-products')"
           routerLink="/admin/products">
          <i class="bi bi-box fs-5"></i>
          <span class="ms-2 sidebar-text" *ngIf="!isCollapsed">View Products</span>
        </a>
      </li>

      <!-- Manage Categories -->
      <li class="nav-item">
        <a class="nav-link py-3 border-bottom text-dark d-flex justify-content-between"
           [class.active]="isSubmenuActive('categories')"
           (click)="toggleCategoriesMenu()">
          <div class="d-flex align-items-center">
            <i class="bi bi-tags fs-5"></i>
            <span class="ms-2 sidebar-text" *ngIf="!isCollapsed">Manage Categories</span>
          </div>
          <i *ngIf="!isCollapsed"
             class="bi"
             [ngClass]="{'bi-chevron-down': !isCategoriesMenuOpen, 'bi-chevron-up': isCategoriesMenuOpen}"></i>
        </a>
        <div class="collapse ps-4" [class.show]="!isCollapsed && isCategoriesMenuOpen">
          <a class="submenu-item text-dark py-2" routerLink="/admin/categories" [class.active]="isActive('view-categories')">
            <i class="bi bi-list-ul me-2"></i>
            <span>View Categories</span>
          </a>
          <a class="submenu-item text-dark py-2" routerLink="/admin/addcategory" [class.active]="isActive('add-category')">
            <i class="bi bi-plus-circle me-2"></i>
            <span>Add Category</span>
          </a>
        </div>
      </li>

      <!-- Reports -->
      <li class="nav-item">
        <a class="nav-link py-3 border-bottom text-dark d-flex align-items-center"
           [class.active]="isActive('reports')"
           routerLink="/admin/reports">
          <i class="bi bi-bar-chart-line fs-5"></i>
          <span class="ms-2 sidebar-text" *ngIf="!isCollapsed">Reports</span>
        </a>
      </li>



 <!-- Profile Section -->
 <li class="nav-item">
   <a class="nav-link py-3 border-bottom text-dark d-flex justify-content-between"
      [class.active]="isSubmenuActive('profile')"
      (click)="toggleProfileMenu()">
     <div class="d-flex align-items-center">
       <img src="assets/sellerUser.png" width="32" height="32" class="rounded-circle">
       <span class="ms-2 sidebar-text" *ngIf="!isCollapsed">Profile</span>
     </div>
     <i *ngIf="!isCollapsed"
        class="bi"
        [ngClass]="{'bi-chevron-down': !isProfileMenuOpen, 'bi-chevron-up': isProfileMenuOpen}"></i>
   </a>
   <div class="collapse ps-4" [class.show]="!isCollapsed && isProfileMenuOpen">
     <a class="submenu-item text-dark py-2" routerLink="/admin/accountprofile" [class.active]="isActive('account-settings')">
       <i class="bi bi-gear me-2"></i>
       <span>Account Settings</span>
     </a>
     <hr class="dropdown-divider">
     <a class="submenu-item text-dark py-2" (click)="openLogoutModal()">
       <i class="bi bi-box-arrow-right me-2"></i>
       <span>Sign out</span>
     </a>
   </div>
 </li>
</ul>
</div>

<!-- Logout Confirmation Modal -->
<div *ngIf="showLogoutModal" class="modal-overlay">
<div class="modal-dialog">
<div class="modal-content">
 <div class="modal-header">
   <h5 class="modal-title">Confirm Logout</h5>
 </div>
 <div class="modal-body">
   <p>Are you sure you want to sign out?</p>
 </div>
 <div class="modal-footer">
   <button type="button" class="btn btn-secondary" (click)="closeLogoutModal()">Cancel</button>
   <button type="button" class="btn btn-orange" (click)="confirmLogout()">Sign Out</button>
 </div>
</div>
</div>
</div>